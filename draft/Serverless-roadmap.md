# README

## 建立Serverless思维 阶段1

### 架构演进

- 单体架构
- 单体架构（水平伸缩）：负载均衡
- 微服务架构（分布式带来挑战）
- 云原生
  - 基于云产品架构
  - 应用生命周期托管

### Serverless价值

1. 不用关心服务器
2. 自动弹性
3. 按实际资源使用计费
4. 更少的代码、更快的交付速度

### 常见Serverless架构模式

#### 1. 介绍

**Serverless计算** = FaaS + BaaS

**原生心智**

1. 我的业务是什么
2. 做这件事情能不能让我的业务出类拔萃
3. 如果不能，我为什么要做这件事情而不是让别人来解决这个问题
4. 在解决业务问题之前没有必要解决技术问题

架构

- 技术
  - 计算
  - 数据存储
  - 消息通信
- 衡量维度
  - 可运维性
  - 安全性
  - 可靠性
  - 可拓展性
  - 成本

#### 2. 静态站点场景

> 更新不频繁

Serverless架构：

- 客户端 => CDN => 函数计算 => 对象存储

#### 3. 单体和微服务

>  业务需求：
>
> - 海量商品
> - 更新频繁
> - 动态信息来源

Servless微服务

- 静态资源：CDN => 对象存储
- 动态请求：API网关 => 函数计算| Serverless应用引擎
- Backend For Frontend

#### 4. 事件触发

> 买家秀：
>
> - 发表图片和视频评论
> - 对图片缩放，加水印，审核
> - 对视频做多种格式转换，审核

- Pub/Sub模式：事件无序、推送
- 事件流模式：有序，拉取
- Event Sourcing模式

#### 5. 服务编排

> 订单流程
>
> - 多步骤流程
> - 可能持续数天
> - 对失败步骤重试
> - 最终失败，需要对已完成步骤回滚

1. 基于事件触发的Saga模式
2. 基于工作流的Saga模式（由Serverless工作流协调各个流程）

### Serverless 技术选型


#### 概览
> 介绍产品

#### 函数计算

**调用**：同步调用、异步调用

**场景**：

- 各种编程语言的Web APP或者Web API相关开发群体
- 对计算力有很大的弹性需求
  - AI推理
  - 音视频等多媒体处理
  - 文档转换、网页截图等处理
- 事件驱动
  - 定时任务
  - 阿里云服务作为事件源触发函数，简化变成模型

**核心优势**

- 专注业务逻辑开发、免运维
- VM级别租户隔离
- 按需付费+预付费
- 毫秒级自动弹性伸缩

#### Serverless 应用引擎

> SAE，核心场景面向在线应用（微服务、Web、多语言应用）

典型场景

- 各种语言的应用快速上云/搬站
- 灵活&弹性使用计算资源
- 低门槛微服务架构转型
- 集成方

#### Serverless Kubernetes

1. ECS中运行容器
2. 容器编排系统
3. Serverless容器编排系统

**场景**

1. 免运维的应用托管
2. 突发流量的弹性扩容
3. 大数据计算任务
4. CI/CD

## Serverless 技术选型及实践 阶段2

### 从零入门函数计算

场景：
- Web应用
- 音视频处理 / 图文处理
- 实时流处理 / 异步数据处理
-  AI推理系统

流程
1. 事件源 / 直接调用
2. 函数计算（同步调用/异步调用）

### 函数粘合云服务

事件驱动，简化编程模型，编写少量的代码即可串联多个服务实现复杂的功能

> 例子：缩略图

### 函数的开发与配置

#### 基本概念-服务

- 日志配置
- 文件存储配置
- 网络配置
- 权限

#### 基本概念-函数

#### 基本概念-版本/别名

### 函数的调试与部署

函数调试方法：

- 云调试
- 命令行工具
- VS Code插件
- 无工具插件

部署方法：

- 在线部署
- 客户端部署：通过VS Code插件，通过命令行工具

### 函数计算在音视频场景实践

#### 场景介绍

> 音视频领域高速增长，远程会议、在线教育、短视频软件
>
> 基于函数计算的弹性高可用音视频处理系统

- 行业背景：不同终端
- 客户痛点：迭代慢
- 核心价值：高可用

**自建服务** 对比 **函数计算+函数工作流 Serverless**

#### 最佳实践

1. 英语在线教育，需求：音频平衡、转码等

   上传音视频 到OSS => 自动触发函数转码 => 转码后的音视频转存OSS

2. 芒果TV，需求：处理用户视频

   采用了全Serverless架构

3. 娱乐传媒，需求：大规模并行音视频转码业务

   短时间内准备大量计算资源进行大规模并行转码处理，同时希望基于FFmpeg自建的转码服务能简单迁移

4. 在线教育：云原生海量视频复杂业务

   视频教材需要剪辑、切分、组合转码、分辨率调整、客户端适配，且需求量存在波峰波谷

#### 案例演示

> Python3 写入OSS，ffmpeg用于转码

### 搭建弹性可拓展的Web API




### Serverless 容器从入门到精通: Serverless K8s

### 降本增效实战利器： Serverless 应用引擎

## Serverless 场景体验

### 函数计算场景体验

> 就跑了个返回Hello World的接口

